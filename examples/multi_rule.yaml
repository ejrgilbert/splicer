version: 1

rules:
  - before:
      interface: wasi:http/handler@0.3.0-rc-2026-01-06
    inject:
      - middleware-a
  - before:
      interface: wasi:http/handler@0.3.0-rc-2026-01-06
      provider:
        name: srv-b
    inject:
      - middleware-b
      - middleware-c
  - between:
      interface: wasi:http/handler@0.3.0-rc-2026-01-06
      inner:
        name: srv-c
      outer:
        name: srv-b
    inject:
      - middleware-d
      - middleware-e
