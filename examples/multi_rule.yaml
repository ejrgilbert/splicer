version: 1

rules:
  - before:
      interface: wasi:http/handler@0.3.0-rc-2026-01-06
    inject:
      - name: middleware-a
  - before:
      interface: wasi:http/handler@0.3.0-rc-2026-01-06
      provider:
        name: srv-b
    inject:
      - name: middleware-b
      - name: middleware-c
  - between:
      interface: wasi:http/handler@0.3.0-rc-2026-01-06
      inner:
        name: srv-c
      outer:
        name: srv-b
    inject:
      - name: middleware-d
      - name: middleware-e
